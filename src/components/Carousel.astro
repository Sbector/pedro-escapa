---
import LeftArrow from "@components/icons/LeftArrow.astro";
import RightArrow from "@components/icons/RightArrow.astro";
import Wrapper from "./Wrapper.astro";

interface Props {
  images: Array<{
    src: string;
    alt: string;
    title?: string;
    description?: string;
    width?: number;
    height?: number;
  }>;
  className?: string;
}

const { images, className = "" } = Astro.props;
---

<Wrapper className={className}>
    <!-- Carrusel -->
    <ul
        id="carousel"
        class="h-full w-full
        py-8 lg:py-32
        flex flex-row
        space-x-32
        overflow-x-auto snap-x snap-mandatory
        scroll-smooth no-scrollbar
        [&>li]:bg-white"
    >
        {images.map((image, index) => (
            <li
                class="snap-start min-w-full flex flex-col justify-center items-center relative"
            >
                <img 
                    src={image.src || "/placeholder.svg"} 
                    alt={image.alt}
                    width={image.width}
                    height={image.height}
                    class="h-full object-contain"
                    loading={index === 0 ? "eager" : "lazy"}
                />
                <p
                    class="text-xs font-light tracking-widest text-center absolute bottom-0 translate-y-8 lg:translate-y-16"
                >
                    <span class="font-bold uppercase pr-1">{image.title || ""}</span> 
                    {image.description || ""}
                </p>
            </li>
        ))}
    </ul>

    <!-- Flecha izquierda -->
    <button
        onclick="document.getElementById('carousel').scrollBy({ left: -window.innerWidth, behavior: 'smooth' })"
        class="hidden md:flex absolute top-1/2 left-12 -translate-y-1/2 rounded-full p-2 cursor-pointer"
        aria-label="Anterior"
    >
        <LeftArrow />
    </button>

    <!-- Flecha derecha -->
    <button
        onclick="document.getElementById('carousel').scrollBy({ left: window.innerWidth, behavior: 'smooth' })"
        class="hidden md:flex absolute top-1/2 right-12 -translate-y-1/2 rounded-full p-2 cursor-pointer"
        aria-label="Siguiente"
    >
        <RightArrow />
    </button>
</Wrapper>