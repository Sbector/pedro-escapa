---
import Layout from "@layouts/Layout.astro";
import Carousel from "@components/Carousel.jsx";
import { getImage } from "astro:assets";

// Obtener imÃ¡genes
const images = Object.values(
    import.meta.glob("../assets/images/*/*.webp", { eager: true }),
);

// Optimizar
const optimizedImages = await Promise.all(
    images.map(async (img: any) => {
        const optimized = await getImage({
            src: img.default ?? img.src ?? img,
            format: "webp",
            quality: 85,
            height: 800,
        });

        return {
            src: optimized.src,
            width: optimized.attributes.width,
            height: optimized.attributes.height,
        };
    }),
);
---

<Layout>
    <Carousel client:load images={optimizedImages} />
</Layout>
