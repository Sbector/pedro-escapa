---
import Layout from "@layouts/Layout.astro";
import { Image } from "astro:assets";
import { menu } from "@lib/menu";
import { getSubitemData } from "@lib/getSubitemData";
import Carousel from "@components/Carousel.astro";
import exampleImage from "@assets/images/bidimensional/98-01/01.webp"

export async function getStaticPaths() {
  const paths = [];

  for (const item of menu) {
    // Solo incluir elementos visibles
    if (item.visible !== false && item.subitems) {
      for (const sub of item.subitems) {
        // Solo incluir subelementos visibles
        if (sub.visible !== false) {
          paths.push({
            params: {
              categoria: item.id,
              slug: sub.slug,
            },
          });
        }
      }
    }
  }

  return paths;
}

const { categoria, slug } = Astro.params;
const subitemData = getSubitemData(menu, categoria, slug);

if (!subitemData) {
  throw new Error(`No se encontró el subitem: ${categoria}/${slug}`);
}

const { label } = subitemData;
---

<Layout title={`${label} · Pedro Escapa`}>
  <Carousel>
    <Image
      src={exampleImage}
      alt="home-painting"
      class="h-full w-auto object-contain"
    />
  </Carousel>
</Layout>
